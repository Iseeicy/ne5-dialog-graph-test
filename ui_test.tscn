[gd_scene load_steps=13 format=3 uid="uid://b4djmdjhpu8du"]

[ext_resource type="PackedScene" uid="uid://co182m20os0b6" path="res://nodes/dialog_text/dialog_text_node.tscn" id="1_2tfvy"]
[ext_resource type="Script" path="res://ui_test.gd" id="1_nwuap"]
[ext_resource type="Script" path="res://dialog_graph_editor.gd" id="1_x54wc"]
[ext_resource type="Script" path="res://nodes/change_character/change_character_node.gd" id="3_odm32"]
[ext_resource type="PackedScene" uid="uid://dg37jnk72yyc8" path="res://resource_field/character_def_resource_field.tscn" id="4_5kpm1"]
[ext_resource type="Script" path="res://nodes/choice_prompt/choice_prompt_node.gd" id="5_28p8y"]
[ext_resource type="PackedScene" uid="uid://cqqx7k6cprmbq" path="res://nodes/choice_prompt/choice_option_container.tscn" id="6_6ows4"]
[ext_resource type="Script" path="res://right_click_menu.gd" id="8_htwaf"]
[ext_resource type="Script" path="res://nodes/forwarder/forwarder_node.gd" id="8_vnrew"]

[sub_resource type="PackedScene" id="PackedScene_lyh33"]
_bundled = {
"conn_count": 1,
"conns": PackedInt32Array(1073741827, 1073741826, 36, 35, 2, 0, 0),
"editable_instances": [],
"names": PackedStringArray("ChangeCharacterNode", "GraphNode", "offset_left", "offset_top", "offset_right", "offset_bottom", "mouse_filter", "title", "position_offset", "show_close", "slot/0/left_enabled", "slot/0/left_type", "slot/0/left_color", "slot/0/left_icon", "slot/0/right_enabled", "slot/0/right_type", "slot/0/right_color", "slot/0/right_icon", "slot/0/draw_stylebox", "slot/1/left_enabled", "slot/1/left_type", "slot/1/left_color", "slot/1/left_icon", "slot/1/right_enabled", "slot/1/right_type", "slot/1/right_color", "slot/1/right_icon", "slot/1/draw_stylebox", "script", "Label", "Label", "layout_mode", "text", "CharacterDefResourceField", "layout_mode", "_on_character_def_resource_field_target_resource_updated", "target_resource_updated"),
"node_count": 3,
"node_paths": [NodePath("."), NodePath("."), NodePath("."), NodePath("CharacterDefResourceField")],
"nodes": PackedInt32Array(-1, -1, 1, 0, -1, 27, 2, 0, 3, 1, 4, 2, 5, 3, 6, 4, 7, 5, 8, 6, 9, 7, 10, 8, 11, 9, 12, 10, 13, 11, 14, 12, 15, 13, 16, 14, 17, 15, 18, 16, 19, 17, 20, 18, 21, 19, 22, 20, 23, 21, 24, 22, 25, 23, 26, 24, 27, 25, 28, 26, 0, 1073741824, 0, 30, 29, -1, 2, 31, 27, 32, 28, 0, 1073741825, 0, 2147483647, 33, 29, 1, 34, 30, 0),
"variants": [422.0, 434.0, 722.0, 547.0, 1, "Change Character", Vector2(422, 434), true, true, 0, Color(0, 1, 1, 1), null, true, 1, Color(1, 1, 0, 1), null, true, false, 0, Color(1, 1, 1, 1), null, false, 0, Color(1, 1, 1, 1), null, true, ExtResource("3_odm32"), 2, "Character:", ExtResource("4_5kpm1"), 2],
"version": 3
}

[sub_resource type="PackedScene" id="PackedScene_200x4"]
_bundled = {
"conn_count": 2,
"conns": PackedInt32Array(1073741828, 1073741827, 35, 34, 2, 0, 0, 1073741830, 1073741829, 37, 36, 2, 0, 0),
"editable_instances": [],
"names": PackedStringArray("ChoicePromptNode", "GraphNode", "offset_left", "offset_top", "offset_right", "offset_bottom", "size_flags_vertical", "mouse_filter", "title", "show_close", "slot/0/left_enabled", "slot/0/left_type", "slot/0/left_color", "slot/0/left_icon", "slot/0/right_enabled", "slot/0/right_type", "slot/0/right_color", "slot/0/right_icon", "slot/0/draw_stylebox", "script", "choice_option_scene", "TopButtonContainer", "HBoxContainer", "layout_mode", "RemoveLineButton", "Button", "layout_mode", "size_flags_horizontal", "text", "AddLineButton", "Button", "layout_mode", "size_flags_horizontal", "text", "_on_remove_line_button_pressed", "pressed", "_on_add_line_button_pressed", "pressed"),
"node_count": 4,
"node_paths": [NodePath("."), NodePath("./TopButtonContainer"), NodePath("./TopButtonContainer"), NodePath("."), NodePath("TopButtonContainer/RemoveLineButton"), NodePath("."), NodePath("TopButtonContainer/AddLineButton")],
"nodes": PackedInt32Array(-1, -1, 1, 0, -1, 19, 2, 0, 3, 1, 4, 2, 5, 3, 6, 4, 7, 5, 8, 6, 9, 7, 10, 8, 11, 9, 12, 10, 13, 11, 14, 12, 15, 13, 16, 14, 17, 15, 18, 16, 19, 17, 20, 18, 0, 1073741824, 0, 22, 21, -1, 1, 23, 19, 0, 1073741825, 0, 25, 24, -1, 3, 26, 20, 27, 21, 28, 22, 0, 1073741826, 0, 30, 29, -1, 3, 31, 23, 32, 24, 33, 25, 0),
"variants": [344.0, 289.0, 745.0, 376.0, 0, 1, "Choice Prompt", true, true, 0, Color(0, 1, 1, 1), null, false, 0, Color(1, 1, 0, 1), null, true, ExtResource("5_28p8y"), ExtResource("6_6ows4"), 2, 2, 3, "-", 2, 3, "+"],
"version": 3
}

[sub_resource type="PackedScene" id="PackedScene_cqqgh"]
_bundled = {
"conn_count": 0,
"conns": PackedInt32Array(),
"editable_instances": [],
"names": PackedStringArray("ForwarderNode", "GraphNode", "offset_left", "offset_top", "offset_right", "offset_bottom", "mouse_filter", "title", "position_offset", "show_close", "slot/0/left_enabled", "slot/0/left_type", "slot/0/left_color", "slot/0/left_icon", "slot/0/right_enabled", "slot/0/right_type", "slot/0/right_color", "slot/0/right_icon", "slot/0/draw_stylebox", "script", "Label", "Label", "layout_mode", "text", "horizontal_alignment", "vertical_alignment"),
"node_count": 2,
"node_paths": [NodePath(".")],
"nodes": PackedInt32Array(-1, -1, 1, 0, -1, 18, 2, 0, 3, 1, 4, 2, 5, 3, 6, 4, 7, 5, 8, 6, 9, 7, 10, 8, 11, 9, 12, 10, 13, 11, 14, 12, 15, 13, 16, 14, 17, 15, 18, 16, 19, 17, 0, 1073741824, 0, 21, 20, -1, 4, 22, 18, 23, 19, 24, 20, 25, 21, 0),
"variants": [493.0, 458.0, 650.0, 538.0, 1, "Forwarder", Vector2(493, 458), true, true, 0, Color(0, 1, 1, 1), null, true, 0, Color(1, 1, 0, 1), null, true, ExtResource("8_vnrew"), 2, "-------------->", 1, 1],
"version": 3
}

[node name="UITest" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_nwuap")

[node name="DialogGraphEditor" type="VBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_x54wc")
node_scenes = Array[PackedScene]([SubResource("PackedScene_lyh33"), SubResource("PackedScene_200x4"), ExtResource("1_2tfvy"), SubResource("PackedScene_cqqgh")])

[node name="GraphEdit" type="GraphEdit" parent="DialogGraphEditor"]
layout_mode = 2
size_flags_vertical = 3
right_disconnects = true

[node name="TODO - Create knowledge junction resource, then a node for those" type="Node" parent="DialogGraphEditor/GraphEdit"]

[node name="RightClickMenu" type="PopupMenu" parent="DialogGraphEditor"]
size = Vector2i(28, 8)
submenu_popup_delay = 0.2
script = ExtResource("8_htwaf")

[node name="SaveButton" type="Button" parent="."]
layout_mode = 0
offset_left = 910.0
offset_top = 16.0
offset_right = 1004.0
offset_bottom = 51.0
text = "Save"

[node name="LoadButton" type="Button" parent="."]
layout_mode = 0
offset_left = 1015.0
offset_top = 16.0
offset_right = 1109.0
offset_bottom = 51.0
text = "Load
"

[connection signal="chose_node_scenes" from="DialogGraphEditor" to="DialogGraphEditor/RightClickMenu" method="_on_dialog_graph_editor_chose_node_scenes"]
[connection signal="connection_from_empty" from="DialogGraphEditor/GraphEdit" to="DialogGraphEditor/RightClickMenu" method="_on_graph_edit_connection_from_empty"]
[connection signal="connection_request" from="DialogGraphEditor/GraphEdit" to="DialogGraphEditor" method="_on_graph_edit_connection_request"]
[connection signal="connection_to_empty" from="DialogGraphEditor/GraphEdit" to="DialogGraphEditor/RightClickMenu" method="_on_graph_edit_connection_to_empty"]
[connection signal="delete_nodes_request" from="DialogGraphEditor/GraphEdit" to="DialogGraphEditor" method="_on_graph_edit_delete_nodes_request"]
[connection signal="disconnection_request" from="DialogGraphEditor/GraphEdit" to="DialogGraphEditor" method="_on_graph_edit_disconnection_request"]
[connection signal="popup_request" from="DialogGraphEditor/GraphEdit" to="DialogGraphEditor/RightClickMenu" method="_on_graph_edit_popup_request"]
[connection signal="spawn_node" from="DialogGraphEditor/RightClickMenu" to="DialogGraphEditor" method="_on_add_node_spawn_node"]
[connection signal="pressed" from="SaveButton" to="." method="_on_save_button_pressed"]
[connection signal="pressed" from="LoadButton" to="." method="_on_load_button_pressed"]
